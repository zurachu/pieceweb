<HTML lang="ja">
<HEAD>
<TITLE>ぴ〜すうぇぶ 暫定ダウンロードページ</TITLE>
</HEAD>
<BODY>
<PRE>
/*
 *	ぴ〜すうぇぶ Ver.20050202
 *	(c)2005 ヅラChu＠てとら★ぽっと
 *	http://zurachu.net/
 *	zurachu@zurachu.net
 */

<A href="pieceweb.lzh">ダウンロード（730,600bytes）</A>

//	1. 概要

　Windows PC上で動作し、PCを介してP/ECEを擬似的なWebサーバにするためのソフトです。メガストア杯応募バージョンからソースコードを構築しなおし、安定性の向上および機能追加を行っています。

//	2. アーカイブについて

　アーカイブを展開すると以下のファイルが展開されます。ご確認下さい。

	pieceweb.exe	プログラムファイル
	pieceif.dll		P/ECE-PC通信ライブラリ
	readme.txt		当説明ファイル
	+ error			エラーコードHTML
	+ src			ソースコード

//	3. 起動方法

　PCにP/ECEを接続している状態で、pieceweb.exeのアイコンをダブルクリックするなどしてぴ〜すうぇぶを実行して下さい。コンソール上でぴ〜すうぇぶが起動されます。デフォルトでは、ポート番号は10810（東鳩ｗ）になり、またP/ECEを複数台接続している時は1台目が参照されます。複数起動も可能ですが、1つのぴ〜すうぇぶにつき1台のP/ECE、1ポートが割り当てられると考えて下さい。
※WindowsXP SP2でご利用の場合等、ファイアウォールにブロックされる可能性があるので、予めぴ〜すうぇぶはブロックしないよう設定して下さい。
※ぴ〜すうぇぶ起動後は他のP/ECEに関しても接続を変更すべきではありません。

［コマンドラインオプション］
-d		デバイス番号（0〜21）
-p		ポート番号（0〜65536）

［例：デバイス番号#1（2台目）のP/ECEを8080番ポートでぴ〜すうぇぶにする］
>	pieceweb -d1 -p8080

//	4. 閲覧方法

　ぴ〜すうぇぶが起動している状態で、Internet ExplorerなどのWebブラウザで
	http://localhost:ポート番号/
にアクセスすると、P/ECEのフラッシュメモリ上のファイル一覧を見ることができます。ご使用のPCがLAN接続などによるプライベートIP、およびインターネット接続によるグローバルIP、ドメインをもっていれば、
	http://IPおよびドメイン:ポート番号/
でネットワーク上にあなたのP/ECEの中身を公開することができます。

　Webブラウザに表示されているファイル一覧からファイルをクリック、もしくはURIでファイル名を指定すると、ファイルを閲覧したりダウンロードしたりできます。現在閲覧が可能なファイルは以下の拡張子だけで，他のファイルはクリックするとダウンロード確認画面に移行します。

	*.txt	*.htm	*.css
	*.gif	*.png	*.jpg

　PGDファイル（P/ECEの標準ビットマップ形式）に対しては、?viewというクエリを付加（ファイル一覧の[VIEW]アンカーも同様）することで、PNG形式に変換してブラウザに表示させることができます。また、ドメイントップに?viewクエリを付加（ファイル一覧のLCD Caputureアンカーも同様）すると、現在のP/ECEの液晶画面をキャプチャしてPNG形式でブラウザに表示します。

　全てのファイルは一旦cacheフォルダにキャッシュされてからクライアントに転送されます。終了後はcacheフォルダを削除していただいてもかまいません。

　404 Not Foundなどのエラーページについては、errorフォルダ以下のHTML文書を編集することで、自由に変更することができます。

// 5. 問題点

　<s>起動時に他のタスクの応答が鈍くなることがあります。原因は分かってないのですが、スレッドまわりかWinSockまわりの関係でしょうか…。</s>
→キー待ちでSleepしてなくてCPU占有率100％になってた＿|￣|○（23:15修正）

// 6. 更新履歴

Ver.20050202
	ソースコード再構築
	複数台P/ECEに対応
	セマフォによるP/ECEへの同時アクセス禁止
	液晶画面キャプチャおよびPGDファイルのPNG形式表示
	エラーコードHTMLを外部読み込み
Ver0.50β
	メガストア杯応募バージョン（初版）

//	7. 謝辞

	PNGフォーマットの利用において、libpng/zlibを使用させていただきました。
	http://www.libpng.org/pub/png/
	http://www.zlib.net/
	また、ばぁば氏のdib2png.cを利用させていただきました。
	http://www.amy.hi-ho.ne.jp/jbaba/
	P/ECEの画面キャプチャにおいて、nsawa氏のP/ECE monitorのソースコードを利用させていただきました。
	また、ismPFFS系関数の利用について、mini ISDのソースコードを参考にさせていただきました。
	http://piece.no-ip.org/

</PRE>
</BODY>
</HTML>
